// Code generated by configgen. DO NOT EDIT.
// Код сгенерирован configgen. НЕ РЕДАКТИРОВАТЬ.

package {{ .Package }}

import (
	"context"
)

// FlagStore интерфейс для бэкенда feature flags
type FlagStore interface {
	GetBool(key string, def bool) bool
	GetInt(key string, def int) int
	GetFloat(key string, def float64) float64
	GetString(key string, def string) string
	// Watch вызывает onChange при изменении значения флага
	Watch(ctx context.Context, onChange func(key string)) error
	Close() error
}

// Flags предоставляет типизированный доступ к feature flags
type Flags struct {
	store FlagStore
}

// NewFlags создает Flags с указанным бэкендом
func NewFlags(store FlagStore) *Flags {
	return &Flags{store: store}
}

// Store возвращает бэкенд для прямого доступа (используется в UI и тестах)
func (f *Flags) Store() FlagStore {
	return f.store
}
{{ range .Flags }}
{{ if .Description }}// {{ .GetterName }} — {{ .Description }}{{ end }}
func (f *Flags) {{ .GetterName }}() {{ .GoType }} {
	return f.store.{{ .StoreMethod }}("{{ .TOMLName }}", {{ .DefaultLiteral }})
}
{{ end }}
// DefaultFlagValues возвращает дефолтные значения всех флагов
func DefaultFlagValues() map[string]any {
	return map[string]any{
{{- range .Flags }}
		"{{ .TOMLName }}": {{ .DefaultLiteral }},
{{- end }}
	}
}
